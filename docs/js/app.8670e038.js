(function(e){function t(t){for(var a,s,i=t[0],c=t[1],u=t[2],l=0,_=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&_.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(_.length)_.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vue-car-game-it/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0ff5":function(e,t,n){"use strict";n("84ca")},"437a":function(e,t,n){"use strict";n("7c7d")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a,r=n("2b0e"),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[e.gameIsRunning?t("div",{staticClass:"grid-container"},[t("div",{staticClass:"narrow-column"},[t("GameCanvas",{attrs:{bus:e.bus,fastest:e.fastest},on:{syntaxerror:e.showErrorLine,oncrash:e.showCrashed,wrongarguments:e.showWrongGear,quitclicked:e.showGiveupDialog}})],1),t("div",{staticClass:"column"},[t("CodeEditor",{ref:"editor",attrs:{name:"editor",bus:e.bus}})],1)]):e._e(),e.wrongGear?t("div",{staticClass:"grid-container"},[e._m(0)]):e._e(),e.crashed?t("div",{staticClass:"grid-container"},[e._m(1)]):e._e(),e.codeFailed?t("div",{staticClass:"grid-container"},[e._m(2)]):e._e(),t("StartModal",{attrs:{fastest:e.fastest},on:{start:e.startGame}}),t("EndModal",{attrs:{speed:e.speed,fastest:e.fastest},on:{sendanswers:e.sendAnswers,skipsending:e.backtostart}}),t("GiveupModal",{on:{resume:e.resumeGame,giveup:e.giveupGame}})],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"column content-box error-box"},[e._v("\n            Uups! Gear can be between 1...6\n            "),t("span",{staticStyle:{"font-size":"200%","margin-left":"20px","vertical-align":"middle"}},[e._v("ðŸ¤­")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"column content-box error-box"},[e._v("\n            Uups! Did you not change gears early enough?\n            "),t("span",{staticStyle:{"font-size":"200%","margin-left":"20px","vertical-align":"middle"}},[e._v("ðŸ¤­")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"column content-box error-box"},[e._v("\n            Something went wrong while parsing your code\n            "),t("span",{staticStyle:{"font-size":"200%","margin-left":"20px","vertical-align":"middle"}},[e._v("ðŸ¤­")])])}],i=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),c=(n("bc3a"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-box flask-editor",attrs:{id:e.editorId}},[e._v("function calcIteration(gear, rpm) {\n  // This loop is executed every tenth of a second.\n  // The variables you'll get are gear (0-6) and rpm.\n\n  // There are couple of things to know\n  // Car will crash on too high RPM\n  // in some situations, changing gears take more time,\n  // and slows you down!\n\n  // ::::::::::::::::::\n  // Start your engines!\n  // ::::::::::::::::::\n\n  if(gear === 0){\n      return 1;\n  }\n\n  // ::::::::::::::::::\n  // Add your code here - return gear (1...6)\n  //  (please, no xss attacks, etc - this is not production code)\n  // ::::::::::::::::::\n\n  return gear;\n"),e._v("\n}")])}),u=[],d=(n("7f7f"),n("84a6")),l={name:"CodeEditor",props:["name","bus"],data:function(){return{editorId:this.name+"-flask"}},methods:{fetchCode:function(){this.bus.$emit("transmitcode",a.getCode())}},mounted:function(){a=new d["a"](document.getElementById(this.editorId),{language:"js"}),this.bus.$on("requestcode",this.fetchCode)},beforeDestroy:function(){this.bus.$off("requestcode")}},_=l,p=(n("437a"),n("2877")),f=Object(p["a"])(_,c,u,!1,null,"872f790a",null),m=f.exports,h=function(){var e=this,t=e._self._c;return t("div",[t("p",[e._v("Speed to beat: "+e._s(e.fastest)+" km/h!")]),t("div",{staticClass:"gamecontainer"},[t("div",{staticClass:"dashboard"},[t("rpmtachometer",{attrs:{rpm:e.rpm}}),t("div",{staticClass:"meter meter--gear"},[t("div",{class:"".concat(e.isChanging?"ischanging":"")},[e._v(e._s(e.gear))])]),t("speedometer",{attrs:{speed:e.speed}})],1),t("canvas",{staticClass:"gamecanvas",attrs:{id:"gamecanvas",width:"1000",height:"200"}}),t("div",{staticClass:"grid-container"},[t("div",{staticClass:"column"},[t("button",{staticClass:"runbutton",on:{click:e.startSimulation}},[t("i",{staticClass:"fas fa-play"})])]),t("div",{staticClass:"column"},[t("button",{staticClass:"runbutton",on:{click:e.stop}},[t("i",{staticClass:"fas fa-stop"})])])])])])},g=[],v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"clock"},[e._v("\n    "+e._s(e.minutes)+":"+e._s(e.seconds)+"\n")])},b=[],y={name:"TimerComponent",props:["minutes","seconds"]},k=y,w=(n("0ff5"),Object(p["a"])(k,v,b,!1,null,"27d4327a",null)),C=w.exports,M=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meter meter--rpm meter--big-label"},[e._l(e.steps,(function(n){return t("div",{key:n,staticClass:"ticks"},[t("div",{class:"grad grad--".concat(n," ").concat(e.redzone(n)),style:e.style(n)},[e._v(e._s(n))]),t("div",{class:"grad-tick grad-tick--".concat(n," ").concat(e.redzone(n)),style:e.style_tick(n)}),n<=7?t("div",{class:"grad-tick grad-tick--half grad-tick--".concat(n," ").concat(e.redzone(n)),style:e.style_tick_half(n)}):e._e(),n<=7?t("div",{class:"grad-tick grad-tick--quarter grad-tick--".concat(n," ").concat(e.redzone(n)),style:e.style_tick_q1(n)}):e._e(),n<=7?t("div",{class:"grad-tick grad-tick--quarter grad-tick--".concat(n," ").concat(e.redzone(n)),style:e.style_tick_q2(n)}):e._e()])})),t("div",{staticClass:"needle",style:e.style_needle(e.rpm)}),t("div",{staticClass:"needle-axle"}),t("div",{staticClass:"label label-value"},[t("div",[e._v(e._s(e.rpm))]),t("span",[e._v("RPM")])])],2)},O=[],j=10,P=30,x=330,S=(x-P)/8,E=function(e){return e>=7?" redzone":""},I=function(e){return P+e*S},T=function(e){return{left:"".concat(50-(50-j)*Math.sin(I(e)*(Math.PI/180)),"%"),top:"".concat(50+(50-j)*Math.cos(I(e)*(Math.PI/180)),"%")}},D=function(e){return function(t){return{left:"".concat(50-50*Math.sin(e(t)*(Math.PI/180)),"%"),top:"".concat(50+50*Math.cos(e(t)*(Math.PI/180)),"%"),transform:"translate3d(-50%, 0, 0) rotate("+(e(t)+180)+"deg)"}}},q=function(e){return e/8e3*(x-P)+P},G=function(e){return{transform:"translate3d(-50%, 0, 0) rotate(".concat(q(e),"deg)")}},$={name:"rpmtachometer",props:["rpm"],data:function(){return{steps:[0,1,2,3,4,5,6,7,8],style:T,style_tick:D(I),style_tick_half:D((function(e){return I(e)+S/2})),style_tick_q1:D((function(e){return I(e)+S/4})),style_tick_q2:D((function(e){return I(e)+3*S/4})),style_needle:G,redzone:E}},mounted:function(){}},R=$,A=Object(p["a"])(R,M,O,!1,null,null,null),L=A.exports,z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meter meter--speed"},[e._m(0),e._l(e.steps,(function(n){return t("div",{key:n,staticClass:"ticks"},[t("div",{class:"grad grad--".concat(n," ").concat(e.redzone(n)),style:e.style(n)},[e._v(e._s(n))]),t("div",{class:"grad-tick grad-tick--".concat(n," ").concat(e.redzone(n)),style:e.style_tick(n)}),n<e.maxSpeed?t("div",{class:"grad-tick grad-tick--half grad-tick--".concat(n," ").concat(e.redzone(n)),style:e.style_tick_half(n)}):e._e(),n<e.maxSpeed?t("div",{class:"grad-tick grad-tick--quarter grad-tick--".concat(n," ").concat(e.redzone(n)),style:e.style_tick_q1(n)}):e._e(),n<e.maxSpeed?t("div",{class:"grad-tick grad-tick--quarter grad-tick--".concat(n," ").concat(e.redzone(n)),style:e.style_tick_q2(n)}):e._e()])})),t("div",{staticClass:"needle",style:e.style_needle(e.speed)}),t("div",{staticClass:"needle-axle"})],2)},B=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"label label-unit"},[t("span",[e._v("Speed")]),t("div",[e._v("Km/h")])])}],W=10,K=30,U=330,F=[0,20,40,60,80,100,120,140,160,180,200,220],H=F[F.length-1],N=(U-K)/220,Y=function(){return""},J=function(e){return K+e*N},V=function(e){return{left:"".concat(50-(50-W)*Math.sin(J(e)*(Math.PI/180)),"%"),top:"".concat(50+(50-W)*Math.cos(J(e)*(Math.PI/180)),"%")}},X=function(e){return function(t){return{left:"".concat(50-50*Math.sin(e(t)*(Math.PI/180)),"%"),top:"".concat(50+50*Math.cos(e(t)*(Math.PI/180)),"%"),transform:"translate3d(-50%, 0, 0) rotate("+(e(t)+180)+"deg)"}}},Q=function(e){return e/(H-0)*(U-K)+K},Z=function(e){return{transform:"translate3d(-50%, 0, 0) rotate(".concat(Q(e),"deg)")}},ee={name:"speedometer",props:["speed"],data:function(){return{maxSpeed:H,steps:F,style:V,style_tick:X(J),style_tick_half:X((function(e){return J(e)+20*N/2})),style_tick_q1:X((function(e){return J(e)+20*N/4})),style_tick_q2:X((function(e){return J(e)+20*N*3/4})),style_needle:Z,redzone:Y}},mounted:function(){}},te=ee,ne=Object(p["a"])(te,z,B,!1,null,null,null),ae=ne.exports;function re(){var e=document.getElementById("gamecanvas"),t=e.getContext("2d"),n=150;t.clearRect(0,0,1e3,500),t.strokeStyle="#ff0000",t.beginPath(),t.moveTo(0,n),t.lineTo(1e3,n),t.stroke(),t.beginPath(),t.lineWidth=3,t.strokeStyle="#ffd111",t.moveTo(945,n),t.lineTo(945,n-60),t.stroke()}function oe(e,t){var n,a,r,o,s=0,i=0,c=document.getElementById("gamecanvas"),u=c.getContext("2d");u.strokeStyle="#ffff00",u.beginPath();for(var d=0;d<12;d++)s=30*d-15+Math.floor(30*Math.random()),i=15+Math.floor(30*Math.random()),n=Math.round(Math.cos(s*Math.PI/180)*i+e),a=Math.round(Math.sin(s*Math.PI/180)*i+t),0==d?(u.moveTo(n,a),r=n,o=a):11==d?u.lineTo(r,o):u.lineTo(n,a);u.stroke()}function se(e){var t=e.xpos,n=void 0===t?50:t,a=e.ypos,r=void 0===a?133:a,o=document.getElementById("gamecanvas"),s=o.getContext("2d"),i=n,c=r;s.strokeStyle="#00ff00",s.lineWidth=1,s.beginPath(),s.arc(n,r,15,0,2*Math.PI),i+=13,c+=10,s.moveTo(i,c),i+=60,s.lineTo(i,c),i+=7,c-=4,s.moveTo(i,c),s.arc(i,c,10,0,2*Math.PI),i-=7,c-=7,s.moveTo(i,c),i-=60,c-=10,s.lineTo(i,c),i-=14,c-=30,s.lineTo(i,c),i-=0,c+=25,s.lineTo(i,c),i-=0,c-=25,s.moveTo(i,c),i-=10,c+=0,s.lineTo(i,c),s.stroke()}var ie,ce,ue,de={drawGameArea:re,drawLander:se,drawExplosion:oe},le=n("a9d8"),_e=function(e,t){t.isFinished()&&t.getCrashed()&&e.drawExplosion(t.getLocation(),120)},pe=function(e){e.drawGameArea()},fe=function(e,t){var n=t.getLocation(),a={xpos:n/10+50};e.drawLander(a)},me=n("59ca"),he=n.n(me),ge=(n("66ce"),{apiKey:"AIzaSyCueVhWtAMNmkOsXRCdu5DyfCpbuVPAqqE",authDomain:"ambientia-speed-race.firebaseapp.com",databaseURL:"https://ambientia-speed-race.firebaseio.com",projectId:"ambientia-speed-race",storageBucket:"ambientia-speed-race.appspot.com",messagingSenderId:"238991134715",appId:"1:238991134715:web:9fea4a2b858830cd05855e"}),ve=he.a.initializeApp(ge),be=ve.database(),ye=function(e){var t=Math.floor(10*e)/10;return be.ref("/stats").set({speed:t})},ke=function(){return be.ref("/stats").once("value").then((function(e){return e.val()&&e.val().speed||0}))},we={name:"GameCanvas",components:{timerComponent:C,rpmtachometer:L,speedometer:ae},props:["bus","fastest"],data:function(){return{minutes:15,seconds:"00",rpm:0,gear:0,speed:0,isChanging:!1,location:0}},methods:{startSimulation:function(){ie&&(clearInterval(ie),ie=null),this.$emit("syntaxerror",!1),this.$emit("wrongargument",!1),le["a"].reset(),pe(de),fe(de,le["a"]),this.bus.$emit("requestcode")},stop:function(){this.$emit("syntaxerror",!1),this.$emit("wrongargument",!1),Ce(de,le["a"])}},mounted:function(){var e=this;ce=new Date,ue="-not changed-",le["a"].reset(),pe(de),fe(de,le["a"]),this.bus.$on("transmitcode",(function(t){var n=e;ue=t,e.$emit("oncrash",!1);var a=le["a"].initialize(t);ie=setInterval((function(){Me(n,a,t)}),100)})),this.bus.$on("datareq",(function(){e.bus.$emit("dataresp",{code:ue,time:Math.floor((new Date-ce)/1e3)})}))},beforeDestroy:function(){ie&&clearInterval(ie),this.bus.$off("transmitcode"),this.bus.$off("datareq")}};var Ce=function(e,t){ie&&(clearInterval(ie),ie=null),t.reset(),pe(e),fe(e,t)},Me=function(e,t,n){var a=null;if(t.isFinished()?(clearInterval(ie),a=t.getSpeed()>140?1:0):a=t.run(n),pe(de),fe(de,t),_e(de,t),e.rpm=t.getRpm(),e.gear=t.getGear(),e.speed=t.getSpeed(),e.isChanging=t.isChangingGears(),e.location=t.getLocation(),null!==a||!t.isFinished()){var r=!1;1===a&&t.getSpeed()>e.fastest&&(r=!0,ye(t.getSpeed())),-1===a?e.$emit("oncrash",!0):1===a?(console.log("FINISHED!!!",t.getSpeed()),e.bus.$emit("gameover",{speed:e.speed,isFastest:r})):-2===a?(clearInterval(ie),e.$emit("syntaxerror",!0)):a<0&&(clearInterval(ie),e.$emit("wrongarguments",!0))}},Oe=we,je=(n("79b8"),Object(p["a"])(Oe,h,g,!1,null,"10a9a9dd",null)),Pe=je.exports,xe=function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:"startmodal",clickToClose:!1}},[t("div",{staticClass:"modal-content"},[t("h1",[e._v("Ambientia Speed Race")]),t("p",[e._v("Atri Ambientialainen from Ambientia has been developing simulator for\n        accelerating a car to maximum speed."),t("br"),t("br"),e._v("\n        Your mission, should you choose to accept it, is to help Atri A. to develop JavaScript\n        application that gains maximum speed. "),t("br"),e._v("\n        Having said that,  notice that the car might behave in strange ways!\n         "),t("br"),t("br"),e._v("\n        Currently speed to beat is: "+e._s(e.fastest)+" km/h\n    ")]),t("button",{on:{click:function(t){return t.preventDefault(),e.$emit("start")}}},[e._v("Begin the challenge")])])])},Se=[],Ee={name:"StartModal",props:["fastest"]},Ie=Ee,Te=(n("9213"),Object(p["a"])(Ie,xe,Se,!1,null,"a0bc59e0",null)),De=Te.exports,qe=function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:"endmodal",clickToClose:!1,scrollable:!0,height:"auto",width:"800"}},[t("div",{staticClass:"modal-content"},[t("h1",[e._v("Wow! You made it")]),e.speed.isFastest?t("div",[t("p",[e._v("You made record of the day "+e._s(Math.floor(10*e.speed.speed)/10)+" km/h!")]),t("p",[e._v("Congrats!")])]):t("div",[t("p",[e._v("Your speed was "+e._s(e.speed.speed)+" km/h. Record of the day is "+e._s(e.fastest)+" km/h")])]),t("p",[e._v("There is a lottery for all people taking part in this game. If you want to take part, ")]),t("button",{staticClass:"sendbtn",on:{click:function(t){return t.preventDefault(),e.sendAnswers.apply(null,arguments)}}},[e._v("I will take part in lottery!")]),t("button",{staticClass:"dismissbtn",on:{click:function(t){return t.preventDefault(),e.backToStart.apply(null,arguments)}}},[e._v("Not this time")])])])},Ge=[],$e={name:"EndModal",props:["speed","fastest"],computed:{titleText:function(){return"timeout"==this.endreason?"Time ran out":"giveup"==this.endreason?"Mission aborted":"winner"==this.endreason?"Safe landing!":void 0},sendDisabled:function(){return!this.permission}},methods:{sendAnswers:function(){this.$emit("sendanswers")},backToStart:function(){this.$emit("skipsending")}}},Re=$e,Ae=(n("9b22"),Object(p["a"])(Re,qe,Ge,!1,null,"60168e4e",null)),Le=Ae.exports,ze=function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:"giveupmodal"}},[t("div",{staticClass:"modal-content"},[t("h1",[e._v("Do you really want to give up?")]),t("br"),e._v("\n        Think fast, clock is still ticking..."),t("br"),t("br"),t("button",{staticClass:"nobutton",on:{click:function(t){return e.$emit("resume")}}},[e._v("No")]),t("button",{staticClass:"yesbutton",on:{click:function(t){return e.$emit("giveup")}}},[e._v("Yes")])])])},Be=[],We={name:"GiveupModal"},Ke=We,Ue=(n("5f82"),Object(p["a"])(Ke,ze,Be,!1,null,"10744b48",null)),Fe=Ue.exports;function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n("5aea");var Ye={name:"app",components:{CodeEditor:m,GameCanvas:Pe,StartModal:De,EndModal:Le,GiveupModal:Fe},data:function(){return{bus:new r["a"],gameIsRunning:!1,codeFailed:!1,crashed:!1,wrongGear:!1,speed:0,fastest:0}},methods:{showEndScreen:function(e){this.$modal.hide("giveupmodal"),this.bus.$emit("datareq"),this.gameIsRunning=!1,this.speed=Ne({},e),this.$modal.show("endmodal")},startGame:function(){this.$modal.hide("startmodal"),this.gameIsRunning=!0},showWrongGear:function(e){this.wrongGear=e},showCrashed:function(e){this.crashed=e},showErrorLine:function(e){this.codeFailed=e},showGiveupDialog:function(){this.$modal.show("giveupmodal")},resumeGame:function(){this.$modal.hide("giveupmodal")},giveupGame:function(){this.showEndScreen("giveup")},sendAnswers:function(e){window.open("https://q.surveypal.com/Ambientia_IT-Hekuma_2021","_blank"),this.backtostart()},backtostart:function(){this.$modal.hide("endmodal"),this.$modal.show("startmodal"),"",0,this.codeFailed=!1}},mounted:function(){var e=this;this.bus.$on("gameover",(function(t){return e.showEndScreen(t)})),this.bus.$on("dataresp",(function(e){e.code,e.time})),this.$modal.show("startmodal"),ke().then((function(t){e.fastest=t}))}},Je=Ye,Ve=(n("aec6"),Object(p["a"])(Je,o,s,!1,null,null,null)),Xe=Ve.exports,Qe=n("1881"),Ze=n.n(Qe);r["a"].use(Ze.a),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(Xe)}}).$mount("#app")},"5aea":function(e,t,n){},"5c75":function(e,t,n){},"5f82":function(e,t,n){"use strict";n("67bf")},6538:function(e,t,n){},"67bf":function(e,t,n){},"79b8":function(e,t,n){"use strict";n("e28b")},"7c7d":function(e,t,n){},"84ca":function(e,t,n){},9213:function(e,t,n){"use strict";n("6538")},"9b22":function(e,t,n){"use strict";n("9ed9")},"9ed9":function(e,t,n){},a9d8:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8e6e"),core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2__),C_omat_vue_car_game_it_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ade3"),rpm,speed,gear,height,crashed,location,ticks;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){Object(C_omat_vue_car_game_it_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function reset(){rpm=100,speed=0,gear=0,crashed=!1,ticks=0,location=0}function getRpm(){return Math.floor(rpm)}function getGear(){return gear}function getSpeed(){return speed}function getCrashed(){return crashed}function getHeight(){return height/10}function getLocation(){return location}function isFinished(){return location>=8e3||crashed}function getTicks(){return ticks}function executeCode(code,rpm,gear){var newcode="("+code+")("+gear+","+rpm+","+changeGear+")",coderes=0;try{coderes=parseInt(eval(newcode))}catch(err){return-2}return isNaN(coderes)?-2:coderes<0||coderes>6?-3:coderes}var ticksToChangeGear=-1,changeGear=function(e,t){ticksToChangeGear=t>7e3?10:t>4e3?4:0,gear=e},gears=[0,.4,.7,1,1.3,1.5,1.68],transmitionRatio=.17,delta=.1,kmh2ms=function(e){return e/3.6};function isChangingGears(){return ticksToChangeGear<=0}var cx=.28,rpmMax=8e3,torqueMin=20,torqueMax=45,torque=0,torqueByRpm=function(e){return torqueMin+e/rpmMax*(torqueMax-torqueMin)};function calculateSpeed(e){torque=isChangingGears()&&rpm<rpmMax?e:-rpm*rpm/1e6;var t=transmitionRatio*gears[gear],n=torque/t,a=20*n/250,r=.6*cx*kmh2ms(speed)^2,o=(a-r)*delta;return o}var runSimulationLoop=function(e){return function(t){var n=executeCode(t,rpm,gear);if(n<1||n>6)return n;gear!==n&&changeGear(n,rpm),ticksToChangeGear>=1&&(ticksToChangeGear-=1);var a=calculateSpeed(e(rpm));return speed+=a,rpm=speed/(60*transmitionRatio*gears[gear]*(.5*Math.PI/1e3)),location+=kmh2ms(speed),rpm>8100?(crashed=!0,-1):location>=8e4?(location=8e4,gear=0,console.log({speed:speed,location:location,gear:gear}),speed>140?1:0):0}},game={reset:reset,getRpm:getRpm,getGear:getGear,getSpeed:getSpeed,isChangingGears:function(){return ticksToChangeGear>0},getHeight:getHeight,getCrashed:getCrashed,isFinished:isFinished,getLocation:getLocation,getTicks:getTicks,run:runSimulationLoop(torqueByRpm)};__webpack_exports__["a"]=_objectSpread(_objectSpread({},game),{},{initialize:function(e){var t=executeCode(e,0,0);switch(t){case 4:return _objectSpread(_objectSpread({},game),{},{run:runSimulationLoop((function(){return 50}))});case 1:case 2:case 3:case 5:case 6:return _objectSpread({},game);default:return t}}})},aec6:function(e,t,n){"use strict";n("5c75")},e28b:function(e,t,n){}});
//# sourceMappingURL=app.8670e038.js.map